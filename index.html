<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit Flow</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="background-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <nav class="bottom-nav">
        <button class="nav-item active" id="navToday" onclick="switchTab('today')">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
            <span>Hoje</span>
        </button>
        <button class="nav-item" id="navHistory" onclick="switchTab('history')">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
            <span>Histórico</span>
        </button>
    </nav>

    <main class="app-container" id="todayTab">
        <header class="app-header">
            <div class="header-top">
                <div id="cloudStatus" class="cloud-status" title="Sincronizado com Sanity">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M17.5 19c2.5 0 4.5-2 4.5-4.5 0-2.3-1.7-4.2-4-4.5a7 7 0 1 0-11 8h10.5z"></path>
                    </svg>
                    <span id="cloudStatusText">Nuvem: Conectando...</span>
                </div>
                <div id="notificationToggle" class="notification-status" onclick="toggleNotifications()"
                    title="Ativar Lembretes">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                </div>
            </div>
            <div class="progress-ring-container">
                <svg class="progress-ring" width="120" height="120">
                    <circle class="progress-ring__circle-bg" stroke="rgba(255,255,255,0.1)" stroke-width="8"
                        fill="transparent" r="52" cx="60" cy="60" />
                    <circle class="progress-ring__circle" id="progressCircle" stroke="url(#gradient)" stroke-width="8"
                        stroke-dasharray="326.7" stroke-dashoffset="326.7" stroke-linecap="round" fill="transparent"
                        r="52" cx="60" cy="60" />
                    <defs>
                        <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" stop-color="#ff4b4b" />
                            <stop offset="100%" stop-color="#00f2fe" />
                        </linearGradient>
                    </defs>
                </svg>
                <div class="progress-text">
                    <span id="progressPercent">0%</span>
                </div>
            </div>
            <h1 class="date-display" id="currentDate">Hoje</h1>
            <p class="motivation-quote" id="quote">"A disciplina é a ponte entre metas e realizações."</p>
        </header>

        <section class="weight-card-container">
            <div class="weight-card" id="weightCard">
                <div class="weight-info">
                    <span class="label">Peso de Hoje</span>
                    <div class="weight-input-group">
                        <input type="number" id="weightInput" step="0.1" placeholder="--" onchange="saveWeight()">
                        <span class="unit">kg</span>
                    </div>
                </div>
                <div class="weight-divider"></div>
                <div class="weight-info">
                    <span class="label">Sua Meta</span>
                    <div class="weight-input-group goal-group">
                        <input type="number" id="targetWeightInput" step="0.1" placeholder="--"
                            onchange="saveTargetWeight()">
                        <span class="unit">kg</span>
                    </div>
                </div>
                <div class="weight-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m5 11 4-7"></path>
                        <path d="m19 11-4-7"></path>
                        <path d="M2 11h20"></path>
                        <path d="m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4"></path>
                        <path d="M4.5 15.5h15"></path>
                        <path d="M8 11v4"></path>
                        <path d="M12 11v4"></path>
                        <path d="M16 11v4"></path>
                    </svg>
                </div>
            </div>
        </section>

        <section class="habits-grid">
            <div class="habit-card" id="cardioCard" onclick="toggleHabit('cardio')">
                <div class="habit-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M20.42 4.58a5.4 5.4 0 0 0-7.65 0l-.77.78-.77-.78a5.4 5.4 0 0 0-7.65 7.65l.77.78 7.65 7.65 7.65-7.65.78-.78a5.4 5.4 0 0 0 0-7.65z">
                        </path>
                    </svg>
                </div>
                <div class="habit-info">
                    <h2>Cardio</h2>
                    <p>Fez seu cardio hoje?</p>
                </div>
                <div class="check-indicator">
                    <div class="inner-check"></div>
                </div>
            </div>

            <div class="habit-card" id="dietCard" onclick="toggleHabit('diet')">
                <div class="habit-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M12 20.94c1.5 2.3 6 1.76 6-2 0-2.3-3.6-4.9-6-5.4-2.4 0.5-6 3.1-6 5.4 0 3.76 4.5 4.3 6 2Z"
                            fill="currentColor" fill-opacity="0.2"></path>
                        <path
                            d="M12 20.94a6.5 6.5 0 0 1-6-5.4c0-4.3 6-7.7 6-12.54 0 4.84 6 8.24 6 12.54a6.5 6.5 0 0 1-6 5.4Z">
                        </path>
                    </svg>
                </div>
                <div class="habit-info">
                    <h2>Dieta</h2>
                    <p>Manteve a dieta?</p>
                </div>
                <div class="check-indicator">
                    <div class="inner-check"></div>
                </div>
            </div>
        </section>

        <footer class="streak-container">
            <div class="streak-box">
                <span class="streak-label">Streak Global</span>
                <span class="streak-count" id="streakCount">0</span>
                <span class="streak-suffix">Dias Imbatíveis</span>
            </div>
        </footer>
    </main>

    <main class="app-container hidden" id="historyTab">
        <header class="app-header">
            <h1 class="date-display">Sua Jornada</h1>
            <p class="motivation-quote">"O que não é medido, não é gerenciado."</p>
        </header>

        <div class="stats-overview">
            <div class="chart-container">
                <canvas id="weightChart"></canvas>
            </div>
        </div>

        <div class="history-controls">
            <button class="secondary-btn" onclick="addPastDate()">+ Registrar Dia Anterior</button>
        </div>

        <div class="full-history-list" id="fullHistoryList">
            <!-- Full history will be injected here -->
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="script.js"></script>
</body>

</html>